<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Bar Example</title>
</head>

<body style="background-color: teal;">
    <div style="display: flex;">
        <div>
            <input type="text" placeholder="Search" [(ngModel)]="str1">
            <button class="ofd" (click)="freedelivery()">Only free delivery</button><br>
            <button (click)="search(str1)">Search</button><br>
            <button class="plh" (click)="ascprice()">price low to high</button>
            <button class="phl" (click)="desprice()">price high to low</button>
            <button class="rlh" (click)="ascrating()">rating low to high</button>
            <button class="rhl" (click)="desrating()">rating high to low</button><br>
            <button class="dis" (click)="applyDiscount()">Apply 50% discount</button>
            <button class="delcha" (click)="deliveryfeeproducts()">product with delivery charges</button><br>
            <button class="tp" (click)="calculateTotalPrice()">Total Price</button>
            <h3 *ngIf="showTotalPrice">Total price: {{calculateTotalPrice()}}</h3>
            <button class="tci" (click)="totalcartitems()">Total cart items</button>
            <h3 *ngIf="cartitems">Total items: {{totalcartitems()}}</h3>
        </div>
        <div style="margin-left: 50px;">
            <label style="margin-top: 10px;">Name:</label>
            <input type="text" [(ngModel)]="newProduct.name" placeholder=""><br>
            <label style="margin-top: 15px;">Price:</label>
            <input type="number" [(ngModel)]="newProduct.price" placeholder="Price"><br>
            <label style="margin-top: 15px;">Rating:</label>
            <input type="number" [(ngModel)]="newProduct.rating" placeholder="Rating"><br>
            <label style="margin-top: 15px;">Free Delivery</label>
            Yes <input type="radio" [(ngModel)]="newProduct.delivery" [value]="true">
            No <input type="radio" [(ngModel)]="newProduct.delivery" [value]="false"><br>
            <button *ngIf="!isEdit" style="margin-top: 20px;background-color: green;color: white;border: none;"
             (click)="addProduct()">
             Add to cart
            </button>
            <button *ngIf="isEdit" style="margin-top: 20px;background-color: green;color: white;border: none;"
             (click)="edit()">
             Update
            </button>
        </div>
    </div>
    <table class="table table-dark table-bordered" border="1">
        <thead>
            <tr>
                <th>S.N0</th>
                <th>Product Name</th>
                <th>Price</th>
                <th>Rating</th>
                <th>Free Delivery</th>
                <th>Actions</th>

            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let p of filteredProducts;let i=index">
                <td>{{i+1}}</td>                
                <td>{{ p.name }}</td>
                <td>{{ p.discountedPrice !== undefined ? p.discountedPrice : p.price }}</td>
                <td>{{ p.rating }}</td>
                <td [ngStyle]="{'color': p.delivery ? 'green' : 'red'}">{{ p.delivery }}</td>
                <td>
                    <button (click)="updateProduct(p,i)">Update</button>
                    <button (click)="deleteProduct(i)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>

</body>

</html>